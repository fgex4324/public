<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุทุจูู ุงูุฏุฑุฏุดุฉ</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <div id="loadingScreen" class="active">
        <div class="spinner"></div>
        <p>ุฌุงุฑู ุงูุชุญููู...</p>
    </div>

    <div id="authScreen" class="auth-container active">
        <h2>ุฃููุงู ุจู!</h2>
        <input type="email" id="authEmail" placeholder="ุงูุจุฑูุฏ ุงูุฅููุชุฑููู">
        <input type="password" id="authPassword" placeholder="ูููุฉ ุงููุฑูุฑ">
        <button id="loginBtn">ุชุณุฌูู ุงูุฏุฎูู</button>
        <button id="signupBtn">ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ</button>
        <div id="authError" class="error-message"></div>
    </div>

    <div id="mainApp" class="app-container">
        <header>
            <h1>ุชุทุจูู ุงูุฏุฑุฏุดุฉ</h1>
            <nav>
                <button id="showPostsBtn" class="active">ุงูููุดูุฑุงุช</button>
                <button id="showChatsBtn">ุงููุญุงุฏุซุงุช</button>
                <button id="showProfileBtn">ุงูููู ุงูุดุฎุตู</button>
                <button id="logoutBtn">ุชุณุฌูู ุงูุฎุฑูุฌ</button>
            </nav>
        </header>

        <div id="postsSection" class="section active">
            <div class="new-post">
                <textarea id="postContent" placeholder="ูุงุฐุง ูุฏูุฑ ูู ุฐูููุ"></textarea>
                <button id="publishPostBtn">ูุดุฑ</button>
            </div>
            <div id="postsList" class="posts-list">
                </div>
        </div>

        <div id="chatsSection" class="section">
            <div class="chat-sidebar">
                <div class="search-users">
                    <input type="text" id="searchUserInput" placeholder="ุงุจุญุซ ุนู ูุณุชุฎุฏู (ุงูุงุณู ุฃู ุงูุจุฑูุฏ)...">
                    <button id="searchUserBtn">ุจุญุซ</button>
                </div>
                <div id="searchResults" class="search-results-list">
                    </div>
                <h3>ุงููุญุงุฏุซุงุช ุงูุฎุงุตุฉ</h3>
                <div id="chatsList" class="chats-list">
                    </div>
            </div>

            <div id="chatContainer" class="chat-container">
                <div class="chat-header">
                    <button id="closeChatBtn">โ</button>
                    <img id="chatHeaderAvatar" src="https://via.placeholder.com/50/CCCCCC/FFFFFF?text=AV" alt="ุตูุฑุฉ ุงูุฏุฑุฏุดุฉ" class="chat-avatar">
                    <h3 id="chatHeaderName">ุงุณู ุงูุฏุฑุฏุดุฉ</h3>
                    <span id="chatStatus" class="chat-status"></span> </div>
                <div id="messagesList" class="messages-list">
                    </div>
                <form id="messageInputForm" class="message-input-form">
                    <textarea id="messageInput" placeholder="ุงูุชุจ ุฑุณุงูุชู..." rows="1"></textarea>
                    <button type="submit" id="sendMessageBtn">ุฅุฑุณุงู</button>
                    <button type="button" id="recordAudioBtn" class="audio-btn">๐ค</button>
                </form>
            </div>
        </div>

        <div id="profileSection" class="section">
            <div class="profile-card">
                <img id="profileAvatar" src="https://via.placeholder.com/150/CCCCCC/FFFFFF?text=AV" alt="ุตูุฑุฉ ุงูููู ุงูุดุฎุตู" class="profile-avatar">
                <input type="file" id="profileImageUpload" accept="image/*" style="display: none;">
                <button id="changeAvatarBtn">ุชุบููุฑ ุงูุตูุฑุฉ</button>
                <h2 id="profileUsername">ุงุณู ุงููุณุชุฎุฏู</h2>
                <p id="profileEmail">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: example@example.com</p>
                <button id="editUsernameBtn">ุชุนุฏูู ุงุณู ุงููุณุชุฎุฏู</button>
                <input type="text" id="newUsernameInput" placeholder="ุงุณู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ" style="display: none;">
                <button id="saveUsernameBtn" style="display: none;">ุญูุธ</button>
                <p>ุนุฏุฏ ุงูููุดูุฑุงุช: <span id="postsCount">0</span></p>
                <button id="showSettingsBtn" class="settings-btn">ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู</button>
            </div>

            <div id="settingsCard" class="profile-card settings-card" style="display: none;">
                <h3>ุฅุนุฏุงุฏุงุช Firebase</h3>
                <div class="setting-item">
                    <label for="apiKeyInput">API Key:</label>
                    <input type="text" id="apiKeyInput" placeholder="API Key">
                </div>
                <div class="setting-item">
                    <label for="authDomainInput">Auth Domain:</label>
                    <input type="text" id="authDomainInput" placeholder="Auth Domain">
                </div>
                <div class="setting-item">
                    <label for="databaseURLInput">Database URL:</label>
                    <input type="text" id="databaseURLInput" placeholder="Database URL">
                </div>
                <div class="setting-item">
                    <label for="projectIdInput">Project ID:</label>
                    <input type="text" id="projectIdInput" placeholder="Project ID">
                </div>
                <div class="setting-item">
                    <label for="storageBucketInput">Storage Bucket:</label>
                    <input type="text" id="storageBucketInput" placeholder="Storage Bucket">
                </div>
                <div class="setting-item">
                    <label for="messagingSenderIdInput">Messaging Sender ID:</label>
                    <input type="text" id="messagingSenderIdInput" placeholder="Messaging Sender ID">
                </div>
                <div class="setting-item">
                    <label for="appIdInput">App ID:</label>
                    <input type="text" id="appIdInput" placeholder="App ID">
                </div>
                <button id="saveFirebaseConfigBtn">ุญูุธ ุฅุนุฏุงุฏุงุช Firebase</button>
                <div id="firebaseConfigMessage" class="error-message"></div>
            </div>
        </div>
    </div>

    <script src="firebase-config.js"></script>
    <script src="auth.js"></script>
    <script src="firestore.js"></script>
    <script src="app.js"></script>
</body>
</html>